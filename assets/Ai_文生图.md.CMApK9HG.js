import{_ as h,o as i,c as r,j as t,t as d,F as _,E as p,a3 as g,a4 as b,e as m,I as f}from"./chunks/framework.Dvw3FbWD.js";const v={data(){return{userInput:"",images:[],selectedImage:null,isLoading:!1,error:""}},methods:{async generateImage(){if(!this.userInput){this.error="请输入提示词";return}this.isLoading=!0,this.error="";const o={model:"cogview-3-plus",prompt:this.userInput,size:"1152x864"};try{const e=await fetch("https://open.bigmodel.cn/api/paas/v4/images/generations",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"e93240cbf8294784848a82a81a79af0b.OSz7CkOqNGlL6DI2"},body:JSON.stringify(o)});if(!e.ok)throw new Error("请求失败");const l=await e.json(),c={url:l.data[0].url,created:l.created};this.images.unshift(c),this.selectImage(c)}catch(e){console.error("生成图像失败:",e),this.error="生成图像失败，请稍后重试"}finally{this.isLoading=!1}},selectImage(o){this.selectedImage=o},formatTimestamp(o){return new Date(o*1e3).toLocaleString()},scrollThumbnails(o){this.$refs.thumbnailList.scrollBy({left:o*200,behavior:"smooth"})}}},I={class:"container"},y={class:"main-content"},k={class:"preview-section"},L={key:0,class:"preview-image"},w=["src"],C={key:1,class:"placeholder"},T=t("p",null,"点击缩略图查看高清大图",-1),A=[T],N={class:"thumbnail-section"},O={class:"thumbnail-controls"},S={class:"thumbnail-list",ref:"thumbnailList"},x=["onClick"],B=["src","alt"],D={class:"input-section"},j=["disabled"],V={key:0,class:"loading"},z=t("div",{class:"spinner"},null,-1),E=t("p",null,"正在生成图像，请稍候...",-1),P=[z,E],q={key:1,class:"error"};function F(o,e,l,c,s,a){return i(),r("div",I,[t("div",y,[t("div",k,[s.selectedImage?(i(),r("div",L,[t("img",{src:s.selectedImage.url,alt:"高清大图",class:"full-image"},null,8,w),t("p",null,"生成时间："+d(a.formatTimestamp(s.selectedImage.created)),1)])):(i(),r("div",C,A))])]),t("div",N,[t("div",O,[t("button",{class:"arrow-button mybutton",onClick:e[0]||(e[0]=n=>a.scrollThumbnails(-1))},"<"),t("div",S,[(i(!0),r(_,null,p(s.images,(n,u)=>(i(),r("div",{key:u,class:"thumbnail-item",onClick:M=>a.selectImage(n)},[t("img",{src:n.url,alt:`缩略图 ${u+1}`},null,8,B)],8,x))),128))],512),t("button",{class:"arrow-button mybutton",onClick:e[1]||(e[1]=n=>a.scrollThumbnails(1))},">")])]),t("div",D,[g(t("input",{"onUpdate:modelValue":e[2]||(e[2]=n=>s.userInput=n),placeholder:"请输入提示词"},null,512),[[b,s.userInput]]),t("button",{class:"mybutton",onClick:e[3]||(e[3]=(...n)=>a.generateImage&&a.generateImage(...n)),disabled:s.isLoading},d(s.isLoading?"生成中...":"生成图像"),9,j)]),s.isLoading?(i(),r("div",V,P)):m("",!0),s.error?(i(),r("div",q,d(s.error),1)):m("",!0)])}const J=h(v,[["render",F]]),H=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"Ai/文生图.md","filePath":"Ai/文生图.md"}'),G={name:"Ai/文生图.md"},K=Object.assign(G,{setup(o){return(e,l)=>(i(),r("div",null,[f(J)]))}});export{H as __pageData,K as default};
